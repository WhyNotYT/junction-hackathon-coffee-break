<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Nordea Aisti - Data Quality Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- External CSS -->
    <link rel="stylesheet" href="css/header.css" />
    <link rel="stylesheet" href="css/footer.css" />
    <link rel="stylesheet" href="css/fonts.css" />
    <link rel="stylesheet" href="css/buttons.css" />
    <link rel="stylesheet" href="css/layout.css" />

    <!-- Chart.js and D3.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        margin: 0;
        padding: 0;
        color: #333;
        min-height: 100vh;
      }

      .dashboard-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
      }

      .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        gap: 20px;
        margin: 20px 0;
      }

      .card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      }

      .card h3 {
        color: #4facfe;
        margin-bottom: 20px;
        font-size: 1.4em;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin: 20px 0;
      }

      .stat-card {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        color: white;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        transition: transform 0.3s ease;
      }

      .stat-card:hover {
        transform: scale(1.05);
      }

      .stat-value {
        font-size: 2em;
        font-weight: bold;
        margin-bottom: 5px;
      }

      .stat-label {
        font-size: 0.9em;
        opacity: 0.9;
      }

      .progress-bar {
        background: #e0e0e0;
        border-radius: 10px;
        overflow: hidden;
        height: 20px;
        margin: 10px 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        transition: width 0.8s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 0.8em;
        font-weight: bold;
      }

      .anomaly-item {
        background: rgba(255, 107, 107, 0.1);
        border: 1px solid rgba(255, 107, 107, 0.3);
        border-radius: 8px;
        padding: 15px;
        margin: 10px 0;
        transition: background 0.3s ease;
      }

      .anomaly-item:hover {
        background: rgba(255, 107, 107, 0.2);
      }

      .confidence-badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.8em;
        font-weight: bold;
        margin-left: 10px;
      }

      .high-confidence {
        background: #ff6b6b;
        color: white;
      }

      .medium-confidence {
        background: #ffa726;
        color: white;
      }

      .low-confidence {
        background: #66bb6a;
        color: white;
      }

      .visualization-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 20px 0;
      }

      .viz-card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
      }

      .viz-card:hover {
        transform: translateY(-3px);
      }

      .viz-card img {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 10px;
        margin-bottom: 15px;
      }

      .suggestions-list {
        list-style: none;
        padding: 0;
      }

      .suggestion-item {
        background: rgba(79, 172, 254, 0.1);
        border-left: 4px solid #4facfe;
        padding: 15px;
        margin: 10px 0;
        border-radius: 5px;
        transition: background 0.3s ease;
      }

      .suggestion-item:hover {
        background: rgba(79, 172, 254, 0.2);
      }

      .method-badge {
        display: inline-block;
        background: #764ba2;
        color: white;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 0.7em;
        margin: 2px;
      }

      header {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        padding: 20px 0;
        text-align: center;
        color: white;
        margin-bottom: 20px;
      }

      header h1 {
        margin: 10px 0 0 0;
        font-size: 2.5em;
      }

      footer {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        padding: 20px 0;
        text-align: center;
        color: white;
        margin-top: 40px;
      }

      .pipeline-status {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 10px 0;
      }

      .status-indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #66bb6a;
      }

      .canvas-container {
        position: relative;
        height: 300px;
        margin: 20px 0;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header>
      <img
        src="assets/logo.svg"
        alt="Nordea Logo"
        class="logo"
        style="height: 50px"
      />
      <h1>üéØ Aisti Data Quality Dashboard</h1>
    </header>

    <div class="dashboard-container">
      <!-- Pipeline Status Overview -->
      <div class="card" style="grid-column: 1 / -1">
        <h3>üöÄ Data Sanitizer Pipeline Status</h3>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value">3.84M</div>
            <div class="stat-label">Total Rows Processed</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">170,948</div>
            <div class="stat-label">Anomalies Detected</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">75%</div>
            <div class="stat-label">Average Confidence</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">4.5%</div>
            <div class="stat-label">Contamination Rate</div>
          </div>
        </div>

        <div class="pipeline-status">
          <div class="status-indicator"></div>
          <span>CSV Limiter: ‚úì Completed - 10,000 lines processed</span>
        </div>
        <div class="pipeline-status">
          <div class="status-indicator"></div>
          <span>First Pass Analysis: ‚úì Completed - 12 columns analyzed</span>
        </div>
        <div class="pipeline-status">
          <div class="status-indicator"></div>
          <span>First Pass Cleanup: ‚úì Completed - 89,512 rows/second</span>
        </div>
        <div class="pipeline-status">
          <div class="status-indicator"></div>
          <span
            >Enhanced Anomaly Detection: ‚úì Completed - 15,802 rows/second</span
          >
        </div>
      </div>

      <div class="dashboard-grid">
        <!-- AI Recommendations -->
        <div class="card">
          <h3>ü§ñ AI Recommendations</h3>
          <ul class="suggestions-list">
            <li class="suggestion-item">
              <strong>High Priority:</strong> Investigate payment anomalies -
              666,315 payment detected with unusual patterns in
              AMT_PAYMENT_CURRENT column
            </li>
            <li class="suggestion-item">
              <strong>Data Quality:</strong> Review credit limit validations -
              Multiple high-value limits (675,000) flagged as outliers
            </li>
            <li class="suggestion-item">
              <strong>Performance:</strong> Consider increasing CHUNK_SIZE to
              500-1000 for faster processing in future runs
            </li>
            <li class="suggestion-item">
              <strong>Precision:</strong> Increase CONFIDENCE_THRESHOLD to
              0.7-0.8 to reduce false positives from current 4.5% rate
            </li>
            <li class="suggestion-item">
              <strong>Risk Alert:</strong> Monitor customers with excessive
              drawing patterns - CNT_DRAWINGS_CURRENT showing values up to 16
            </li>
          </ul>
        </div>

        <!-- Anomaly Detection Summary -->
        <div class="card">
          <h3>‚ö†Ô∏è Anomaly Detection Results</h3>
          <div class="progress-bar">
            <div class="progress-fill" style="width: 4.5%">4.5% Anomalies</div>
          </div>

          <div style="margin: 20px 0">
            <h4>Detection Methods Performance:</h4>
            <div style="margin: 10px 0">
              <span class="method-badge">zscore</span> 170,948 detections
              (100.0%)
            </div>
            <div style="margin: 10px 0">
              <span class="method-badge">mahalanobis</span> 170,948 detections
              (100.0%)
            </div>
            <div style="margin: 10px 0">
              <span class="method-badge">morphological</span> 170,947 detections
              (100.0%)
            </div>
            <div style="margin: 10px 0">
              <span class="method-badge">isolation_forest</span> 219 detections
              (0.1%)
            </div>
          </div>

          <div class="anomaly-item">
            <strong>Sample Anomaly #1801:</strong>
            <span class="confidence-badge medium-confidence"
              >75% Confidence</span
            >
            <br /><small>Methods: zscore, mahalanobis, morphological</small>
            <br /><small
              >Flagged: AMT_PAYMENT_CURRENT (666,315), AMT_CREDIT_LIMIT_ACTUAL
              (675,000)</small
            >
          </div>

          <div class="anomaly-item">
            <strong>Sample Anomaly #1827:</strong>
            <span class="confidence-badge medium-confidence"
              >75% Confidence</span
            >
            <br /><small>Methods: zscore, mahalanobis, morphological</small>
            <br /><small
              >Flagged: CNT_DRAWINGS_CURRENT (16), CNT_DRAWINGS_ATM_CURRENT
              (4)</small
            >
          </div>
        </div>

        <!-- Most Flagged Columns -->
        <div class="card">
          <h3>üìä Most Problematic Columns</h3>
          <div style="margin: 15px 0">
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin: 10px 0;
              "
            >
              <span>CNT_DRAWINGS_CURRENT</span>
              <span><strong>55,317</strong> flags (32.4%)</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 32.4%"></div>
            </div>
          </div>

          <div style="margin: 15px 0">
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin: 10px 0;
              "
            >
              <span>AMT_DRAWINGS_CURRENT</span>
              <span><strong>53,576</strong> flags (31.3%)</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 31.3%"></div>
            </div>
          </div>

          <div style="margin: 15px 0">
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin: 10px 0;
              "
            >
              <span>CNT_DRAWINGS_ATM_CURRENT</span>
              <span><strong>51,608</strong> flags (30.2%)</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 30.2%"></div>
            </div>
          </div>

          <div style="margin: 15px 0">
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin: 10px 0;
              "
            >
              <span>AMT_DRAWINGS_ATM_CURRENT</span>
              <span><strong>40,404</strong> flags (23.6%)</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 23.6%"></div>
            </div>
          </div>

          <div style="margin: 15px 0">
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin: 10px 0;
              "
            >
              <span>AMT_INST_MIN_REGULARITY</span>
              <span><strong>39,393</strong> flags (23.0%)</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 23%"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Data Visualizations Section -->
      <div class="card" style="grid-column: 1 / -1">
        <h3>üìà Data Visualizations</h3>
        <div class="visualization-grid">
          <div class="viz-card">
            <img src="images/1.png" alt="Anomaly Distribution Chart" />
            <h4>Anomaly Distribution</h4>
            <p>
              Distribution of detected anomalies across different confidence
              levels
            </p>
          </div>
          <div class="viz-card">
            <img src="images/2.png" alt="Method Performance Chart" />
            <h4>Detection Method Performance</h4>
            <p>
              Comparative analysis of anomaly detection method effectiveness
            </p>
          </div>
          <div class="viz-card">
            <img src="images/3.png" alt="Column Analysis Chart" />
            <h4>Column Anomaly Heatmap</h4>
            <p>Visual representation of anomaly frequency by data column</p>
          </div>
        </div>
      </div>

      <!-- Audio Processing Section -->
      <div class="card" style="grid-column: 1 / -1">
        <h3>üéµ Audio Analysis Results</h3>
        <div class="visualization-grid">
          <div class="viz-card">
            <img src="audio_analysis/1.png" alt="Audio Waveform Analysis" />
            <h4>Waveform Anomalies</h4>
            <p>Detection of irregular patterns in audio transaction data</p>
          </div>
          <div class="viz-card">
            <img src="audio_analysis/2.png" alt="Frequency Domain Analysis" />
            <h4>Frequency Domain Analysis</h4>
            <p>Spectral analysis revealing hidden data patterns</p>
          </div>
          <div class="viz-card">
            <img src="audio_analysis/3.png" alt="Audio Feature Extraction" />
            <h4>Feature Extraction Results</h4>
            <p>Key audio features correlating with data anomalies</p>
          </div>
        </div>
      </div>

      <!-- Confidence Distribution Chart -->
      <div class="card">
        <h3>üìä Confidence Score Distribution</h3>
        <div class="canvas-container">
          <canvas id="confidenceChart"></canvas>
        </div>
        <div style="margin-top: 15px">
          <div
            style="display: flex; justify-content: space-between; margin: 5px 0"
          >
            <span>High Confidence (‚â•0.8):</span>
            <span><strong>218</strong> (0.1%)</span>
          </div>
          <div
            style="display: flex; justify-content: space-between; margin: 5px 0"
          >
            <span>Medium Confidence (0.6-0.8):</span>
            <span><strong>170,730</strong> (99.9%)</span>
          </div>
          <div
            style="display: flex; justify-content: space-between; margin: 5px 0"
          >
            <span>Low Confidence (<0.6):</span>
            <span><strong>0</strong> (0.0%)</span>
          </div>
        </div>
      </div>

      <!-- Processing Performance -->
      <div class="card">
        <h3>‚ö° Processing Performance</h3>
        <div class="stats-grid">
          <div
            style="
              background: #667eea;
              color: white;
              padding: 15px;
              border-radius: 8px;
              text-align: center;
            "
          >
            <div style="font-size: 1.5em; font-weight: bold">243.02s</div>
            <div style="font-size: 0.9em">Total Processing Time</div>
          </div>
          <div
            style="
              background: #764ba2;
              color: white;
              padding: 15px;
              border-radius: 8px;
              text-align: center;
            "
          >
            <div style="font-size: 1.5em; font-weight: bold">15,802</div>
            <div style="font-size: 0.9em">Rows/Second</div>
          </div>
          <div
            style="
              background: #4facfe;
              color: white;
              padding: 15px;
              border-radius: 8px;
              text-align: center;
            "
          >
            <div style="font-size: 1.5em; font-weight: bold">16 CPU</div>
            <div style="font-size: 0.9em">Cores Utilized</div>
          </div>
          <div
            style="
              background: #00f2fe;
              color: white;
              padding: 15px;
              border-radius: 8px;
              text-align: center;
            "
          >
            <div style="font-size: 1.5em; font-weight: bold">229MB</div>
            <div style="font-size: 0.9em">Output File Size</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <p>&copy; 2025 Nordea Hackathon Team - Enhanced Data Quality Analytics</p>
    </footer>

    <script>
      // Initialize confidence chart
      const ctx = document.getElementById("confidenceChart").getContext("2d");
      new Chart(ctx, {
        type: "doughnut",
        data: {
          labels: [
            "High Confidence (‚â•0.8)",
            "Medium Confidence (0.6-0.8)",
            "Low Confidence (<0.6)",
          ],
          datasets: [
            {
              data: [218, 170730, 0],
              backgroundColor: ["#ff6b6b", "#ffa726", "#66bb6a"],
              borderWidth: 2,
              borderColor: "#ffffff",
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: "bottom",
            },
          },
        },
      });

      // Add some interactive animations
      document.addEventListener("DOMContentLoaded", function () {
        const cards = document.querySelectorAll(".card");

        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.style.opacity = "1";
              entry.target.style.transform = "translateY(0)";
            }
          });
        });

        cards.forEach((card) => {
          card.style.opacity = "0";
          card.style.transform = "translateY(20px)";
          card.style.transition = "opacity 0.6s ease, transform 0.6s ease";
          observer.observe(card);
        });

        // Animate progress bars
        setTimeout(() => {
          const progressFills = document.querySelectorAll(".progress-fill");
          progressFills.forEach((fill) => {
            const width = fill.style.width;
            fill.style.width = "0%";
            setTimeout(() => {
              fill.style.width = width;
            }, 100);
          });
        }, 500);
      });
    </script>
  </body>
</html>
